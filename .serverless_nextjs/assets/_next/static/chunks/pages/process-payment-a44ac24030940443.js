(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{3258:function(n,e,t){"use strict";t.d(e,{y:function(){return u}});var r=t(7294);function u(n,e=r.createElement(r.Fragment,null)){return function(t){return r.createElement(r.Suspense,{fallback:"function"===typeof e?r.createElement(e,Object.assign({},t)):e},r.createElement(n,Object.assign({},t)))}}},6011:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/process-payment",function(){return t(7634)}])},7634:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return x}});var r=t(7568),u=t(7297),o=t(4051),c=t.n(o),a=t(5944),i=t(756),s=t(7337),f=t(6486),l=t(1163),d=t(7294),p=t(5066),v=t(1727),m=t(5746),y=t(3258),h=t(3261);function k(){var n=(0,u.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return k=function(){return n},n}var x=(0,y.y)((function(){var n=(0,l.useRouter)(),e=n.query,t=(0,m.N)({suspense:!0}),u=(0,h.useCallbackOnce)((0,r.Z)(c().mark((function r(){var u,o,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,f.sumBy)(t,(function(n){return n.amount*n.product.price})),o=t.map((function(n){return n.id})),r.prev=2,r.next=5,(0,p.L)({paymentKey:String(e.paymentKey),orderId:String(e.orderId),cost:u,cartItemIds:o,addressId:Number(e.addressId)});case 5:a=r.sent,n.push("/complete-order?orderId=".concat(a.id)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),n.back();case 12:case"end":return r.stop()}}),r,null,[[2,9]])}))),[t]);return(0,d.useEffect)((function(){t.length&&u()}),[u]),(0,a.BX)(b,{children:[(0,a.tZ)(i.od,{src:"https://assets6.lottiefiles.com/packages/lf20_XgfqoVFulv.json",options:{loop:!0,autoPlay:!0},style:{width:"200px"}}),(0,a.tZ)(i.Ki,{height:14}),(0,a.tZ)(i.xv,{size:"lg",color:v.O9.gray600,children:"\uacb0\uc81c \ucc98\ub9ac\uc911\uc785\ub2c8\ub2e4"}),(0,a.tZ)(i.Ki,{height:60})]})})),b=s.Z.div(k())},5982:function(n,e,t){"use strict";t.d(e,{u:function(){return o}});var r=t(4026),u=t(8767);function o(n){var e=(0,u.useQuery)("product-list",(function(){return(0,r.y)({})}),n);return[e.data,e.refetch]}},4328:function(n,e,t){"use strict";t.d(e,{jD:function(){return x},l8:function(){return b},XZ:function(){return g}});var r=t(7568),u=t(6042),o=t(828),c=t(9815),a=t(4051),i=t.n(a),s=t(1708),f=t(7294),l=t(4480),d=t(6983),p=window.localStorage,v=(0,d.J)({storage:p}).persistAtom,m=(0,l.cn)({key:"local-cart",default:[],effects_UNSTABLE:[v]}),y=t(4653),h=t(5982),k=t(6808);function x(n){var e=(0,o.Z)((0,y.VI)(n),2),t=e[0],r=e[1],u=g().value,a=(0,o.Z)((0,h.u)(),1)[0],i=(0,f.useMemo)((function(){return null==a?[]:u.map((function(n){var e=a.find((function(e){return e.id===n.productId}));return{id:Date.now(),product:e,amount:n.amount,options:n.options.map((function(n){return{id:n.optionId,option:e.options.find((function(e){return e.id===n.optionId})),amount:n.amount}}))}}))}),[u,a]);return{value:(0,f.useMemo)((function(){return(0,c.Z)(i).concat((0,c.Z)(null!==t&&void 0!==t?t:[]))}),[i,t]),local:i,reload:r}}function b(){var n=(0,o.Z)((0,k.a)(),1)[0],e=x(),t=e.value,u=e.local,c=e.reload,a=g(),l=(0,f.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,(0,s.Xq)(t);case 3:return e.next=5,c();case 5:e.next=8;break;case 7:a.add(t);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]),d=(0,f.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(e){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((t=u.findIndex((function(n){return n.id===e})))>=0)){n.next=5;break}a.remove(t),n.next=9;break;case 5:return n.next=7,(0,s.EI)(e);case 7:return n.next=9,c();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,u]),p=(0,f.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,(0,s.LL)();case 3:return e.next=5,c();case 5:a.clear();case 6:case"end":return e.stop()}}),e)}))),[n]),v=(0,f.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(e,t){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=u.findIndex((function(n){return n.id===e})))>=0)){n.next=5;break}a.updateItem(r,{amount:t}),n.next=9;break;case 5:return n.next=7,(0,s.oZ)(e,t);case 7:return n.next=9,c();case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[t,u]);return{value:t,local:u,reload:c,add:l,remove:d,clear:p,updateAmount:v}}function g(){var n=(0,o.Z)((0,l.FV)(m),2),e=n[0],t=n[1];return{add:(0,f.useCallback)((function(n){t((function(e){return(0,c.Z)(e).concat([n])}))}),[]),clear:(0,f.useCallback)((function(){return t([])}),[]),remove:(0,f.useCallback)((function(n){t((function(e){return e.filter((function(e,t){return t!==n}))}))}),[]),value:null!==e&&void 0!==e?e:[],updateItem:(0,f.useCallback)((function(n,e){t((function(t){var r=(0,c.Z)(t);return r[n]=(0,u.Z)({},t[n],e),r}))}),[])}}},5746:function(n,e,t){"use strict";t.d(e,{N:function(){return c}});var r=t(6321),u=t(4480),o=t(4328);function c(n){var e=(0,u.sJ)(r.x),t=(0,o.jD)(n);return e.length?e:t.value}},6321:function(n,e,t){"use strict";t.d(e,{x:function(){return r}});var r=(0,t(4480).cn)({key:"orderItems",default:[]})},6983:function(n,e){"use strict";e.J=void 0;e.J=(n={})=>{if("undefined"===typeof window)return{persistAtom:()=>{}};const{key:e="recoil-persist",storage:t=localStorage}=n,r=(n,e,t,r)=>{r?delete e[t]:e[t]=n,c(e)},u=()=>{const n=t.getItem(e);return null===n||void 0===n?{}:"string"===typeof n?o(n):"function"===typeof n.then?n.then(o):{}},o=n=>{if(void 0===n)return{};try{return JSON.parse(n)}catch(e){return console.error(e),{}}},c=n=>{try{"function"===typeof t.mergeItem?t.mergeItem(e,JSON.stringify(n)):t.setItem(e,JSON.stringify(n))}catch(r){console.error(r)}};return{persistAtom:({onSet:n,node:e,trigger:t,setSelf:o})=>{if("get"===t){const n=u();"function"===typeof n.then&&n.then((n=>{n.hasOwnProperty(e.key)&&o(n[e.key])})),n.hasOwnProperty(e.key)&&o(n[e.key])}n((async(n,t,o)=>{const c=u();"function"===typeof c.then?c.then((t=>r(n,t,e.key,o))):r(n,c,e.key,o)}))}}}},9815:function(n,e,t){"use strict";t.d(e,{Z:function(){return c}});var r=t(943);var u=t(3375);var o=t(1566);function c(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||(0,u.Z)(n)||(0,o.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(n){n.O(0,[774,888,179],(function(){return e=6011,n(n.s=e);var e}));var e=n.O();_N_E=e}]);